(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{959:function(e,t,r){Promise.resolve().then(r.bind(r,4531))},4531:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),s=r(2265),l=r(4829);let o="https://flask-todo-cicd-production-f351.up.railway.app/api";console.log("DEBUG API_URL =",o),console.log("[DEBUG] API_URL =",o);let d=l.Z.create({baseURL:o,headers:{"Content-Type":"application/json"},timeout:1e4});d.interceptors.response.use(e=>e,e=>{var t,r,a;let s=null===(t=e.response)||void 0===t?void 0:t.status,l=(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||e.message;return console.error("[API Error ".concat(s||"???","]: ").concat(l)),Promise.reject(e)});let n={getTodos:async()=>{try{return(await d.get("/todos")).data}catch(e){throw console.error("[getTodos error]:",e.message),e}},createTodo:async e=>{try{return(await d.post("/todos",e)).data}catch(e){throw console.error("[createTodo error]:",e.message),e}},updateTodo:async(e,t)=>{try{return(await d.put("/todos/".concat(e),t)).data}catch(e){throw console.error("[updateTodo error]:",e.message),e}},deleteTodo:async e=>{try{return(await d.delete("/todos/".concat(e))).data}catch(e){throw console.error("[deleteTodo error]:",e.message),e}},healthCheck:async()=>{try{return(await d.get("/health")).data}catch(e){throw console.error("[healthCheck error]:",e.message),e}}};function i(e){let{onAdd:t,loading:r}=e,[l,o]=(0,s.useState)(""),[d,n]=(0,s.useState)(""),[i,c]=(0,s.useState)(!1),[x,u]=(0,s.useState)(null),h=async e=>{if(e.preventDefault(),console.log("Submit clicked",{title:l,description:d}),!l.trim()){u("Please enter a title");return}c(!0),u(null);try{console.log("Calling onAdd..."),await t({title:l.trim(),description:d.trim()}),console.log("onAdd success"),o(""),n("")}catch(e){console.error("Submit error:",e),u("Failed to add todo. Please try again.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-8 border-2 border-purple-100",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-3xl",children:"➕"}),"Add New Task"]}),x&&(0,a.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-semibold mb-2 text-sm uppercase tracking-wide",children:"Task Title *"}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>{console.log("Title changed:",e.target.value),o(e.target.value)},placeholder:"What do you need to do?",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500  focus:ring-4 focus:ring-purple-100 outline-none transition text-gray-800 placeholder-gray-400 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:i||r,autoFocus:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-semibold mb-2 text-sm uppercase tracking-wide",children:"Description (Optional)"}),(0,a.jsx)("textarea",{value:d,onChange:e=>n(e.target.value),placeholder:"Add more details...",rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500  focus:ring-4 focus:ring-purple-100 outline-none transition resize-none text-gray-800 placeholder-gray-400 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:i||r})]}),(0,a.jsx)("button",{type:"submit",disabled:i||r,onClick:e=>console.log("Button clicked",e),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold  py-4 px-6 rounded-xl hover:from-purple-700 hover:to-pink-700  disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-xl",children:"✨"}),"Add Task"]})}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["Debug: Title length = ",l.length,", Submitting = ",i?"true":"false"]})]})]})}function c(e){let{todos:t,onUpdate:r,onDelete:l,loading:o}=e,[d,n]=(0,s.useState)(null),[i,c]=(0,s.useState)(null),x=async e=>{n(e.id);try{await r(e.id,{completed:!e.completed})}finally{n(null)}},u=async e=>{if(confirm("Are you sure you want to delete this task?")){c(e);try{await l(e)}finally{c(null)}}};return o?(0,a.jsxs)("div",{className:"text-center py-16 bg-white rounded-2xl shadow-xl",children:[(0,a.jsx)("div",{className:"inline-block w-16 h-16 border-4 border-purple-200 border-t-purple-600  rounded-full animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg font-medium",children:"Loading your tasks..."})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-16 bg-white rounded-2xl shadow-xl border-2 border-dashed border-gray-300",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAF"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-700 mb-2",children:"No tasks yet!"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"Add your first task to get started"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-200\n                    border-2 p-5 transform hover:scale-[1.01] ".concat(e.completed?"border-green-200 bg-green-50":"border-purple-100 hover:border-purple-300"," ").concat(d===e.id||i===e.id?"opacity-50":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("button",{onClick:()=>x(e),disabled:d===e.id||i===e.id,className:"flex-shrink-0 mt-1 disabled:cursor-not-allowed",children:(0,a.jsx)("div",{className:"w-7 h-7 rounded-lg border-3 flex items-center justify-center\n                             transition-all duration-200 ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-purple-500 hover:bg-purple-50"),children:e.completed&&(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-1 break-words ".concat(e.completed?"line-through text-gray-500":"text-gray-800"),children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-sm mb-2 break-words ".concat(e.completed?"text-gray-400":"text-gray-600"),children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)("span",{children:"\uD83D\uDD50"}),(0,a.jsx)("span",{children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsx)("button",{onClick:()=>u(e.id),disabled:d===e.id||i===e.id,className:"flex-shrink-0 w-10 h-10 rounded-lg bg-red-50 hover:bg-red-100  text-red-600 hover:text-red-700 transition-all duration-200 flex items-center justify-center font-bold text-xl hover:scale-110 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50",title:"Delete task",children:"\uD83D\uDDD1️"})]})},e.id))})}function x(e){let{todos:t}=e,r={total:t.length,completed:t.filter(e=>e.completed).length,pending:t.filter(e=>!e.completed).length};return 0===t.length?null:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 border-blue-100 text-center  transform hover:scale-105 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"text-3xl mb-1",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:r.total}),(0,a.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Total Tasks"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 border-green-100 text-center transform hover:scale-105 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"text-3xl mb-1",children:"✅"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r.completed}),(0,a.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Completed"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 border-2 border-orange-100 text-center transform hover:scale-105 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"text-3xl mb-1",children:"⏳"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:r.pending}),(0,a.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Pending"})]})]})}function u(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null),[u,h]=(0,s.useState)("checking");(0,s.useEffect)(()=>{m(),g()},[]);let m=async()=>{try{await n.healthCheck(),h("healthy")}catch(e){h("unhealthy"),d("Cannot connect to API. Please check if the backend is running.")}},g=async()=>{try{l(!0);let e=await n.getTodos();t(e.data||[]),d(null)}catch(e){d("Failed to load todos. Please try again."),console.error("Load todos error:",e)}finally{l(!1)}},p=async e=>{try{await n.createTodo(e),await g()}catch(e){throw alert("Failed to add todo. Please try again."),e}},b=async(e,t)=>{try{await n.updateTodo(e,t),await g()}catch(e){throw alert("Failed to update todo. Please try again."),e}},y=async e=>{try{await n.deleteTodo(e),await g()}catch(e){throw alert("Failed to delete todo. Please try again."),e}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 py-8 px-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"text-5xl animate-bounce",children:"✨"}),(0,a.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"My Todo List"}),(0,a.jsx)("div",{className:"text-5xl animate-bounce",children:"\uD83D\uDCDD"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"Organize your tasks beautifully"}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium  shadow-sm bg-white border-2 border-gray-200",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("healthy"===u?"bg-green-500 animate-pulse":"unhealthy"===u?"bg-red-500":"bg-yellow-500 animate-pulse")}),(0,a.jsx)("span",{className:"text-gray-700",children:"healthy"===u?"\uD83D\uDFE2 API Connected":"unhealthy"===u?"\uD83D\uDD34 API Disconnected":"\uD83D\uDFE1 Connecting..."})]})]}),o&&(0,a.jsx)("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"⚠️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-800 font-medium",children:o}),(0,a.jsx)("button",{onClick:()=>{m(),g()},className:"text-red-600 underline text-sm mt-1 hover:text-red-800",children:"Try again"})]})]})}),(0,a.jsx)(i,{onAdd:p,loading:r}),(0,a.jsx)(x,{todos:e}),(0,a.jsx)(c,{todos:e,onUpdate:b,onDelete:y,loading:r}),(0,a.jsxs)("div",{className:"mt-12 text-center text-gray-500 text-sm",children:[(0,a.jsxs)("p",{className:"mb-2",children:["Made with ",(0,a.jsx)("span",{className:"text-red-500 animate-pulse",children:"❤️"})," using Next.js + Flask"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Frontend: GitHub Pages | Backend: Render | Database: PostgreSQL"})]})]})})}}},function(e){e.O(0,[737,971,938,744],function(){return e(e.s=959)}),_N_E=e.O()}]);